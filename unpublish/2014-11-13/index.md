---
title: 頭がわるいのでunderscore.jsのメソッドを図にした - フィルター型編
author: shoota
date: 2014-11-13
template: article.jade
---

サーバサイド(Node.js)、クライアントサイドの両方で使えるjavascript utility library、[undersocre.js](http://underscorejs.org/)。
とても便利なメソッドがそろっていて、そのなかでも特に配列やObjectに関するユーティリティは便利。
複雑になりがちなループ処理を簡潔に記述できるのでコードが見やすいだけでなく、ループ内で実行したい処理が場合わけされるので、コーディングしながら「あれ、この処理前にも似たもの書いたな」と気づきやすくなる。

ただ、ひとつ残念なことがある。それは「（僕の）頭がわるいのでどのメソッドを使うべきなのか瞬時に把握できない」ということだ。
多次元配列の処理をするときに集中していないと何をしているかわからなくなる。単純2次元配列ならいいが、`[obj : { array: [ [] ], obj{[] }}]`とかになるとやばい。


混乱すると、手書きで図を書いているのだが、いい加減覚えたいので、図にまとめた。
今回は配列やObjectを引数として、そこから一定の条件で対象を抽出するメソッド群を「フィルター型」としてまとめてみる。

<span class="more"></span>

### underscore.jsのメソッド群

undersocre.jsはいろいろな配列に関するメソッドがあるけども、おおまかに分類すると以下のようになると思う。名前はなんとなく勝手につけてます。

- 基本処理型
  - 配列要素に同じ処理を一括して実行する。配列に対する基本処理。
  - `each`、`map`、`reduce`など。
- フィルター型
  - 配列やobjectの配列に対して、一定条件の要素を抜き取って返す。
  - フィルターを関数オブジェクトとして渡すタイプと、フィルターは定義済みで条件（フィルターの網目の大きさのようなイメージ）を指定するタイプがある。
  - `filter`、`first`、`max`、`where`など
- 抽出型
  - object配列の要素objectに対して、フィルターする。
  - フィルター型に似ているがフィルターは配列要素を仕分けするのに対し、抽出型は配列要素の要素に対して処理する。
  - `keys`、`pluck`、`pick`、'compact'など
- 生成・加工型
  - 複数の配列から新たな配列を作ったり、並べ替えたり、配列要素を変更したりする。
  - `object`、`difference`、`sortBy`、`invert`、`flatten`、`shuffle`など
- 配列情報型
 　- 配列全体から得られる情報を返す。そのため、返り値は配列ではなく、多くは真偽値を返す。
  - `indexOf`、`contains`、`has`、`every`など
- その他
  - 分類できないもの。


フィルター型と抽出型を混同しやすいが、フィルター型は配列の要素に対してtrue/falseを判定し、抽出型はオブジェクトの中身にたいして判定する。


### 図解フィルター型メソッド


![gists_capture](/img/emojiawesome_js.png)


---